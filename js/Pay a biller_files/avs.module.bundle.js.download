!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=178)}({0:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return a});var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n,a;return t=e,(n=[{key:"init",value:function(){}},{key:"showError",value:function(e){this.showMessage(e,!1)}},{key:"showDefaultErrorMessage",value:function(){return this.showMessage(MESSAGE_BUNDLE.getKey("core.default.error.message"),!1),!1}},{key:"showModalError",value:function(e){$(".modal-message").html(MESSAGE_BUNDLE.getKey(e)).removeClass("hidden")}},{key:"hideModalError",value:function(){$(".modal-message").html("").addClass("hidden")}},{key:"showSuccess",value:function(e){this.showMessage(e,!0)}},{key:"showDefaultSuccessMessage",value:function(){return this.showMessage(MESSAGE_BUNDLE.getKey("core.default.success.message"),!0),!0}},{key:"showMessage",value:function(e,t){frameMgr.showMessage(MESSAGE_BUNDLE.getKey(e),t)}},{key:"getField",value:function(e,t){return e&&e.toString().trim()?e:t&&""!==t.trim()?t:MESSAGE_BUNDLE.getKey("core.na")}},{key:"getDateField",value:function(e,t){try{return e&&e.toString().trim()?moment(e).format("MMMM Do YYYY, h:mm:ss a"):this.getField(t)}catch(e){}return t}},{key:"confirm",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return confirm(MESSAGE_BUNDLE.getKey(e))})},{key:"loadTemplate",value:function(e,t){var n=$.Deferred();return $.ajax({url:"/remita/res/app-resources/".concat(e),method:"get",success:function(e){return n.resolve(Handlebars.compile(e)(t))},error:function(e){return n.reject(e)}}),n.promise()}},{key:"hideDefaultSuccessMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout(function(){$("#sys-message-holder.alert-success").slideUp("fast",function(){$(this).removeClass("alert-success").slideDown().addClass("hidden")})},e)}},{key:"hideDefaultErrorMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout(function(){$("#sys-message-holder.alert-danger").slideUp("fast",function(){$(this).removeClass("alert-danger").slideDown().addClass("hidden")})},e)}},{key:"hideParamSuccessMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout(function(){$(".param-alert.alert-success").slideUp("fast",function(){$(this).removeClass("alert-success").slideDown().addClass("hidden")})},e)}},{key:"hideParamErrorMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout(function(){$(".param-alert.alert-danger").slideUp("fast",function(){$(this).removeClass("alert-danger").slideDown().addClass("hidden")})},e)}}])&&r(t.prototype,n),a&&r(t,a),e}()},1:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return a});var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t||(t={ajax:{beforeSend:function(){frameMgr.showProcessingMessage(MESSAGE_BUNDLE.getKey("core.please.wait"))},complete:function(){frameMgr.removeProcessingMessage()}}}),this.settings={ajax:$.extend({method:"post",headers:{"Content-Type":"application/json"}},t.ajax)}}var t,n,a;return t=e,(n=[{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,data:JSON.stringify(t)},n))}},{key:"postPreparedData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,data:t},n))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,method:"get"},t))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,method:"delete"},t))}},{key:"postMultiPartForm",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,data:t,processData:!1,contentType:!1,method:"POST"},n))}}])&&r(t.prototype,n),a&&r(t,a),e}()},178:function(e,t,n){"use strict";n.r(t);var r=n(34);window.avs=new r.a,window.avs.registerEvents()},34:function(e,t,n){"use strict";var r=n(9),a=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,i(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a["a"]),n=t,(r=[{key:"displayAvsInfo",value:function(e,t){if(e&&e.length>0){var n=e[0],r=$("[data-avs-content='".concat(t,"']"));if(r.length>0)r.find("img").prop("src","/remita/images/".concat(n.bankCode,".png")),r.find(".avs-name__detail").html(n.nameOnAccount),r.find(".avs-account__detail").html(n.bvnAccountNo);else{var a='\n                <div data-avs-content="'.concat(t,'">\n                    <span class="avs-logo">\n                        <img src="/remita/images/').concat(n.bankCode,'.png" height="30"/>\n                    </span> \n                    <div class="avs-name">\n                        <div><span class="avs-name__label">Account Name:</span> <span class="avs-name__detail">').concat(n.nameOnAccount,'</span></div>\n                        <div><span class="avs-name__label">Account Number:</span> <span class="avs-account__detail">').concat(n.bvnAccountNo,"</span></div>\n                    </div>\n                </div>\n            ");$("[data-avs-info='".concat(t,"']")).length>0?$("[data-avs-info='".concat(t,"']")).html(a):$(a).insertAfter("[data-avs-account='".concat(t,"']"))}}else this.displayError("core.avs.not.found",t)}},{key:"displayError",value:function(e,t){var n=MESSAGE_BUNDLE.getKey(e),r=$("[data-avs-content='".concat(t,"']"));r.length>0&&r.remove();var a='<span class="text-danger">'.concat(n,"</span>");$("[data-avs-info='".concat(t,"']")).length>0?$("[data-avs-info='".concat(t,"']")).html(a):$(a).insertAfter("[data-avs-account='".concat(t,"']"))}}])&&s(n.prototype,r),o&&s(n,o),t}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return d});var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.service=new r.a({}),this.view=new l}var t,n,a;return t=e,(n=[{key:"registerEvents",value:function(){var e=this;0===$("[data-avs-off]").length&&0===$("[avs-off]").length&&($(document).on("blur","[data-avs-account]",function(t){return e.handleAvsEvent(t,"avs-account")}),$(document).on("change","[data-avs-bank]",function(t){return e.handleAvsEvent(t,"avs-bank")}))}},{key:"handleAvsEvent",value:function(e,t){var n=$(e.target).data(t);this.lookUpAccount(n)}},{key:"lookUpAccount",value:function(e){var t=$("[data-avs-bank='".concat(e,"']")).hasClass("error"),n=$("[data-avs-account='".concat(e,"']")).hasClass("error");return t||n?$.Deferred().reject("error in inputs"):this.doLookUpAccount(e,{bankCode:$("[data-avs-bank='".concat(e,"']")).data("auto-key")||$("[data-avs-bank='".concat(e,"']")).val(),accountNumber:$("[data-avs-account='".concat(e,"']")).val()})}},{key:"doLookUpAccount",value:function(e,t){var n=this,r=t.bankCode,a=t.accountNumber;return a&&r?this.service.lookupAccount({bankCode:r,accountNumber:a}).then(function(t){return n.view.displayAvsInfo(t,e),t},function(e){return n.view.displayError("core.avs.failed"),$.Deferred().reject(e)}):$.Deferred().reject("Invalid")}}])&&f(t.prototype,n),a&&f(t,a),e}();t.b=new d},9:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,c(t).call(this,e))).formData={},n.banks=[],n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,r["a"]),n=t,(a=[{key:"loadBanks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n="/remita/onepage/cloud/banklist/user/".concat(t?"corporate":"personal","/bank.json"),r=$.Deferred();return $.ajax($.extend({},this.settings.ajax,{url:n,method:"get",success:function(t){try{if(t){var n=JSON.parse($.base64.decode(t));n.responseCode&&"00"==n.responseCode?(e.banks=n.responseData,r.resolve(e.banks)):r.reject(n.responseMsg)}else r.reject("no data")}catch(e){r.reject(e)}},error:function(e){return r.reject(e)}})),r.promise()}},{key:"lookupAccount",value:function(e){this.formData=e;var t=$.Deferred();return $.ajax($.extend({},this.settings.ajax,{url:"/remita/onepage/cloud/acctlookup.json",data:$.base64.encode(JSON.stringify({accountNumber:this.formData.accountNumber,bankCode:this.formData.bankCode,requestChannel:"WEB"})),success:function(e){if(e){var n=JSON.parse($.base64.decode(e));n.responseCode&&"00"==n.responseCode?t.resolve(n.responseData):t.reject(n.responseMsg)}else t.reject("no data")},error:function(e){return t.reject(e)}})),t.promise()}},{key:"addAccount",value:function(e){var t=$.Deferred();return $.ajax($.extend({},this.settings.ajax,{url:"/remita/company/accounts/".concat(e.readd?"re-add":"add",".reg"),data:JSON.stringify(e),success:function(e){e.responseCode&&"91"==e.responseCode?t.resolve(e.responseData[0]):t.reject(e.responseMsg)},error:function(e){return t.reject(e)}})),t.promise()}},{key:"validateAccount",value:function(e){var t=$.Deferred();return $.ajax($.extend({},this.settings.ajax,{url:"/remita/company/accounts/otp/validate.reg",data:JSON.stringify(e),success:function(e){e?e.responseCode&&"00"===e.responseCode?t.resolve(e):t.reject(e):t.reject({responseMsg:"no data"})},error:function(e){return t.reject(e)}})),t.promise()}},{key:"findPendingAccounts",value:function(){var e=$.Deferred();return $.ajax({method:"post",headers:{"Content-Type":"application/json"},url:"/remita/company/accounts/pending.json",success:function(t){return e.resolve(t)},error:function(t){return e.reject(t)}}),e.promise()}},{key:"requestOtp",value:function(e){return $.ajax($.extend({},this.settings.ajax,{data:JSON.stringify(e),url:"/remita/company/accounts/otp/request.json"}))}},{key:"findUnconfirmedAccounts",value:function(){var e=$.Deferred();return $.ajax($.extend({},this.settings.ajax,{url:"/remita/onepage/cloud/banklist/bank.json",method:"get",success:function(t){if(t){var n=JSON.parse($.base64.decode(t));n.responseCode&&"00"==n.responseCode?e.resolve(n.responseData):e.reject(n.responseMsg)}else e.reject("no data")},error:function(t){return e.reject(t)}})),e.promise()}},{key:"getBankTypeByCode",value:function(e){var t=this,n=$.Deferred();return this.banks?n.resolve(this.retrieveBankTypeByCode(e)):this.loadBanks().then(function(){return n.resolve(t.retrieveBankTypeByCode(e))}),n.promise()}},{key:"retrieveBankTypeByCode",value:function(e){return this.banks.find(function(t){return e===t.bankId}).regAuthType}},{key:"logForPayment",value:function(e){var t=e.rrr,n=e.amount,r=e.channel,a=void 0===r?"card":r;return this.post("/remita/onepage/cloud/send/api/posttasksvc/profile/paymentlog.json",null,{data:btoa(JSON.stringify({rrr:t,amount:n,channel:a})),dataType:"text"}).then(function(e){var t=JSON.parse(atob(e));return t&&"00"===t.responseCode&&t.responseData[0]&&t.responseData[0].cardOrderId?t.responseData[0].cardOrderId:$.Deferred().reject(t)})}},{key:"findAllAccounts",value:function(){return this.get("/remita/company/accounts/available.json")}},{key:"updateAccountStatus",value:function(e){return this.post("/remita/company/accounts/acct-status.json",e).then(function(e){if(e&&"00"===e.responseCode&&e.responseData)return e.responseData[0];throw new Error(e)})}},{key:"profileAccount",value:function(e){return this.post("/remita/company/accounts/acct-profile.reg",e).then(function(e){if(e&&"00"===e.responseCode&&e.responseData)return e.responseData[0];throw new Error(e)})}}])&&o(n.prototype,a),u&&o(n,u),t}()}});