!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=478)}({0:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n,o;return t=e,(n=[{key:"init",value:function(){}},{key:"showError",value:function(e){this.showMessage(e,!1)}},{key:"showDefaultErrorMessage",value:function(){return this.showMessage(MESSAGE_BUNDLE.getKey("core.default.error.message"),!1),!1}},{key:"showModalError",value:function(e){$(".modal-message").html(MESSAGE_BUNDLE.getKey(e)).removeClass("hidden")}},{key:"hideModalError",value:function(){$(".modal-message").html("").addClass("hidden")}},{key:"showSuccess",value:function(e){this.showMessage(e,!0)}},{key:"showDefaultSuccessMessage",value:function(){return this.showMessage(MESSAGE_BUNDLE.getKey("core.default.success.message"),!0),!0}},{key:"showMessage",value:function(e,t){frameMgr.showMessage(MESSAGE_BUNDLE.getKey(e),t)}},{key:"getField",value:function(e,t){return e&&e.toString().trim()?e:t&&""!==t.trim()?t:MESSAGE_BUNDLE.getKey("core.na")}},{key:"getDateField",value:function(e,t){try{return e&&e.toString().trim()?moment(e).format("MMMM Do YYYY, h:mm:ss a"):this.getField(t)}catch(e){}return t}},{key:"confirm",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return confirm(MESSAGE_BUNDLE.getKey(e))})},{key:"loadTemplate",value:function(e,t){var n=$.Deferred();return $.ajax({url:"/remita/res/app-resources/".concat(e),method:"get",success:function(e){return n.resolve(Handlebars.compile(e)(t))},error:function(e){return n.reject(e)}}),n.promise()}},{key:"hideDefaultSuccessMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout(function(){$("#sys-message-holder.alert-success").slideUp("fast",function(){$(this).removeClass("alert-success").slideDown().addClass("hidden")})},e)}},{key:"hideDefaultErrorMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout(function(){$("#sys-message-holder.alert-danger").slideUp("fast",function(){$(this).removeClass("alert-danger").slideDown().addClass("hidden")})},e)}},{key:"hideParamSuccessMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout(function(){$(".param-alert.alert-success").slideUp("fast",function(){$(this).removeClass("alert-success").slideDown().addClass("hidden")})},e)}},{key:"hideParamErrorMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout(function(){$(".param-alert.alert-danger").slideUp("fast",function(){$(this).removeClass("alert-danger").slideDown().addClass("hidden")})},e)}}])&&r(t.prototype,n),o&&r(t,o),e}()},1:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return o});var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t||(t={ajax:{beforeSend:function(){frameMgr.showProcessingMessage(MESSAGE_BUNDLE.getKey("core.please.wait"))},complete:function(){frameMgr.removeProcessingMessage()}}}),this.settings={ajax:$.extend({method:"post",headers:{"Content-Type":"application/json"}},t.ajax)}}var t,n,o;return t=e,(n=[{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,data:JSON.stringify(t)},n))}},{key:"postPreparedData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,data:t},n))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,method:"get"},t))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,method:"delete"},t))}},{key:"postMultiPartForm",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.ajax($.extend({},this.settings.ajax,{url:e,data:t,processData:!1,contentType:!1,method:"POST"},n))}}])&&r(t.prototype,n),o&&r(t,o),e}()},478:function(e,t,n){"use strict";n.r(t);var r=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,u(t).call(this))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["a"]),n=t,(o=[{key:"buildBankCustomRequiredFields",value:function(){var e=$("[data-bank-custom-fields]").data("bank-custom-fields");if(e){var t=this.getRequiredAuthTypeDescriptions(e),n="";t.forEach(function(t){var r=t.replace("description","param"),o=r.replace("param","userAuthCode");n+='\n          <div class="form-group form-group-lg">\n            <label for="">'.concat(e[r],'</label>\n            <input type="text" class="form-control input-lg required ').concat(r," otp-form-fields ").concat(e[r].toLowerCase(),'" name="').concat(o.replace("1",""),'" id="otp" placeholder="').concat(e[t],'" />\n          </div>\n        ')}),$("[data-bank-custom-fields]").html(n),$(".expirydate").mask("00/00",{placeholder:"01/50"})}}},{key:"getRequiredAuthTypeDescriptions",value:function(e){return Object.keys(e).filter(function(e){return e.match(/description/i)})}}])&&a(n.prototype,o),c&&a(n,c),t}(),l=n(1);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,y(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,l["a"]),n=t,(r=[{key:"requestOTP",value:function(e){return this.post("/remita/onepage/activate-mandate.json",e)}}])&&d(n.prototype,r),o&&d(n,o),t}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=new c,this.service=new m}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.addFormBehavior()}},{key:"addFormBehavior",value:function(){var e=this;$(document).on("custom-fields-loaded",function(t){return e.view.buildBankCustomRequiredFields()}),$(document).on("click",".bank-custom-request-otp",function(t){return e.displayCustomFields()})}},{key:"displayCustomFields",value:function(){$(document).trigger("initBankValidation"),this.service.requestOTP({bankCode:$("#bank-code").val(),accountNumber:$("#account-number").val()}).then(this.handleSuccessfulOtpRequest).catch(function(e){})}},{key:"handleSuccessfulOtpRequest",value:function(e){var t=e.responseData[0],n=t.requiredAuthTypes,r=$("[data-bank-custom-fields]");r.data("bank-custom-fields",n),r.data("request-id",t.requestId),$(document).trigger("custom-fields-loaded"),$(".qr-code-section ").addClass("hidden"),$("#otpForm").removeClass("hidden")}}])&&v(t.prototype,n),r&&v(t,r),e}();$(function(){(new g).init()})}});